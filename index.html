<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HerbChain - Transparent Herbal Supply Chain</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=DM+Sans:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
   

    <div class="grain-overlay"></div>

    <header>
      <div class="header-content">
        
      <nav class="navbar">
      <div class="logo">VanaspatiSetuüåø</div>
      <div class="nav-links">
        
        <a href="index.html">Home</a>
        <a href="index.html#verify">Verify</a>
        <a href="farmer.html">Farmer</a>
        <a href="qr_codes.html">QR</a>
        <a href="architecture.html">Architecture</a>
      </div>
    </nav>
    </header>

    <div class="container">
      <div class="hero">
        <h1>From Soil to Shelf</h1>
        <p>
          Every herb has a story. Verify the complete journey of your herbal
          products with blockchain-powered transparency.
        </p>
      </div>

      <div class="search-section" id="verify">
        <h2>Verify Your Product</h2>
        <div class="qr-input-group">
          <input
            type="text"
            class="qr-input"
            id="batchInput"
            placeholder="Enter Batch ID (e.g., ASHW_2026_001) or scan QR code"
          />
          <button class="btn btn-primary" onclick="verifyBatch()">
            Verify
          </button>
        </div>
        <p style="margin-bottom: 1rem; color: var(--earth-600)">
          Try our sample batches:
        </p>
        <div class="quick-samples">
          <button class="sample-btn" onclick="loadBatch('ASHW_2026_001')">
            Ashwagandha Capsules
          </button>
          <button class="sample-btn" onclick="loadBatch('TULSI_2026_042')">
            Tulsi Tea Blend
          </button>
          <button class="sample-btn" onclick="loadBatch('BRAHMI_2026_018')">
            Brahmi Extract
          </button>
        </div>
      </div>

      <div id="batchDetails" class="batch-details">
        <div class="batch-header">
          <div class="qr-display">üì±</div>
          <div class="batch-info">
            <h2 id="productName">Loading...</h2>
            <div class="batch-meta">
              <strong>Batch ID:</strong> <span id="batchId"></span> |
              <strong>Manufactured:</strong> <span id="mfgDate"></span>
            </div>
          </div>
          <div class="status-badge status-verified">‚úì Verified</div>
        </div>

        <div class="timeline">
          <h3>üå± Journey Timeline</h3>
          <div id="timelineContent"></div>
        </div>

        <div class="grid-2">
          <div class="card">
            <h3>üìç Origin Map</h3>
            <div id="map"></div>
            <div
              style="
                margin-top: 1rem;
                color: var(--earth-600);
                font-size: 0.9rem;
              "
            >
              <strong>Location:</strong> <span id="location"></span>
            </div>
          </div>

          <div class="card">
            <h3>üî¨ Lab Test Results</h3>
            <div id="testResults" class="test-results"></div>
          </div>
        </div>

        <div class="fair-trade">
          <h3>üí∞ Fair Trade & Sustainability</h3>
          <div class="payment-details" id="paymentDetails"></div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-content">
        <p>
          <strong>HerbChain</strong> - Powered by Hyperledger Fabric Blockchain
        </p>
        <p>
          Ensuring transparency, quality, and fair practices in the herbal
          supply chain
        </p>
        <p style="font-size: 0.85rem; margin-top: 1.5rem">
          ¬© 2026 HerbChain Project. Built for transparency and trust.
        </p>
      </div>
    </footer>

    <script>
      const batchDatabase = {
        ASHW_2026_001: {
          productName: "Ashwagandha Root Capsules",
          batchId: "ASHW_2026_001",
          mfgDate: "January 15, 2026",
          location: "Nagpur District, Maharashtra",
          coords: [21.1458, 79.0882],
          timeline: [
            {
              icon: "üåæ",
              title: "Harvested",
              date: "December 20, 2025",
              details: {
                Collector: "Ramesh Kumar (ID: FK_2341)",
                Quantity: "150 kg",
                Location: "Nagpur, Maharashtra",
                GPS: "21.1458¬∞N, 79.0882¬∞E",
              },
            },
            {
              icon: "üè≠",
              title: "Processed",
              date: "January 5, 2026",
              details: {
                Facility: "GreenHerb Processing Pvt Ltd",
                Method: "Low-temperature drying (40¬∞C)",
                Operator: "Sunita Verma",
                Duration: "48 hours",
              },
            },
            {
              icon: "üî¨",
              title: "Lab Tested",
              date: "January 10, 2026",
              details: {
                Lab: "BioTest Analytics, Mumbai",
                "Report ID": "BT-2026-00789",
                "Test Date": "January 10, 2026",
                Certification: "NABL Accredited",
              },
            },
            {
              icon: "üíä",
              title: "Formulated",
              date: "January 15, 2026",
              details: {
                "Batch Size": "10,000 capsules",
                Formula: "ASH-CAP-500MG",
                Facility: "AyurVed Pharma Ltd",
                Packaging: "HDPE Bottles, 60 count",
              },
            },
          ],
          tests: [
            {
              name: "Moisture Content",
              value: "8.2%",
              status: "pass",
              threshold: "< 10%",
            },
            {
              name: "Pesticide Residues",
              value: "Not Detected",
              status: "pass",
              threshold: "< 0.01 mg/kg",
            },
            {
              name: "Heavy Metals (Lead)",
              value: "0.05 ppm",
              status: "pass",
              threshold: "< 2.5 ppm",
            },
            {
              name: "Withanolides",
              value: "4.8%",
              status: "pass",
              threshold: "> 2.5%",
            },
            {
              name: "DNA Barcode",
              value: "Withania somnifera",
              status: "pass",
              threshold: "Species confirmed",
            },
            {
              name: "Microbial Count",
              value: "< 10¬≥ CFU/g",
              status: "pass",
              threshold: "< 10‚Åµ CFU/g",
            },
          ],
          payment: [
            { value: "‚Çπ245/kg", label: "Base Price Paid" },
            { value: "‚Çπ25/kg", label: "Sustainability Bonus" },
            { value: "‚Çπ40,500", label: "Total Payment to Farmer" },
            { value: "15 days", label: "Payment Processing Time" },
          ],
        },
        TULSI_2026_042: {
          productName: "Organic Tulsi Tea Blend",
          batchId: "TULSI_2026_042",
          mfgDate: "February 2, 2026",
          location: "Satara District, Maharashtra",
          coords: [17.6599, 73.9894],
          timeline: [
            {
              icon: "üåø",
              title: "Harvested",
              date: "January 10, 2026",
              details: {
                Collector: "Women Farmer Collective (WFC_089)",
                Quantity: "200 kg fresh leaves",
                Location: "Satara, Maharashtra",
                GPS: "17.6599¬∞N, 73.9894¬∞E",
              },
            },
            {
              icon: "‚òÄÔ∏è",
              title: "Sun Dried",
              date: "January 12, 2026",
              details: {
                Facility: "Village Cooperative Drying Unit",
                Method: "Natural sun-drying",
                Duration: "3 days",
                Weather: "Clear skies, 28-32¬∞C",
              },
            },
            {
              icon: "üî¨",
              title: "Lab Tested",
              date: "January 20, 2026",
              details: {
                Lab: "Organic Certification Labs, Pune",
                "Report ID": "OCL-2026-01234",
                "Test Date": "January 20, 2026",
                Certification: "FSSAI & Organic India",
              },
            },
            {
              icon: "üì¶",
              title: "Packaged",
              date: "February 2, 2026",
              details: {
                "Batch Size": "5,000 tea bags",
                Formula: "TULSI-TEA-2G",
                Facility: "Sacred Herbs Tea Co.",
                Packaging: "Biodegradable tea bags",
              },
            },
          ],
          tests: [
            {
              name: "Moisture Content",
              value: "9.5%",
              status: "pass",
              threshold: "< 12%",
            },
            {
              name: "Pesticide Residues",
              value: "Not Detected",
              status: "pass",
              threshold: "< 0.01 mg/kg",
            },
            {
              name: "Essential Oil Content",
              value: "0.7%",
              status: "pass",
              threshold: "> 0.5%",
            },
            {
              name: "Eugenol",
              value: "68%",
              status: "pass",
              threshold: "> 60%",
            },
            {
              name: "DNA Barcode",
              value: "Ocimum sanctum",
              status: "pass",
              threshold: "Species confirmed",
            },
            {
              name: "Organic Certification",
              value: "Verified",
              status: "pass",
              threshold: "Certified Organic",
            },
          ],
          payment: [
            { value: "‚Çπ180/kg", label: "Base Price Paid" },
            { value: "‚Çπ30/kg", label: "Organic Premium" },
            { value: "‚Çπ16,800", label: "Total to Collective" },
            { value: "7 days", label: "Payment Processing" },
          ],
        },
        BRAHMI_2026_018: {
          productName: "Brahmi Leaf Extract",
          batchId: "BRAHMI_2026_018",
          mfgDate: "January 28, 2026",
          location: "Kottayam District, Kerala",
          coords: [9.5916, 76.5222],
          timeline: [
            {
              icon: "üåä",
              title: "Harvested (Wetland)",
              date: "January 5, 2026",
              details: {
                Collector: "Kerala Ayurveda Farmers (KAF_156)",
                Quantity: "100 kg fresh plant",
                Location: "Kottayam, Kerala",
                GPS: "9.5916¬∞N, 76.5222¬∞E",
              },
            },
            {
              icon: "üè≠",
              title: "Processed",
              date: "January 8, 2026",
              details: {
                Facility: "AyurExtract Technologies",
                Method: "Cold-press extraction",
                Temperature: "< 25¬∞C",
                Yield: "12 kg extract",
              },
            },
            {
              icon: "üî¨",
              title: "Lab Tested",
              date: "January 15, 2026",
              details: {
                Lab: "PhytoScience Labs, Kochi",
                "Report ID": "PSL-2026-00445",
                "Test Date": "January 15, 2026",
                Certification: "GMP Certified",
              },
            },
            {
              icon: "üß™",
              title: "Standardized",
              date: "January 28, 2026",
              details: {
                "Batch Size": "10 liters",
                Formula: "BRAHMI-EXT-20%",
                Standardization: "20% Bacosides",
                Packaging: "Amber glass bottles",
              },
            },
          ],
          tests: [
            {
              name: "Bacoside Content",
              value: "22.3%",
              status: "pass",
              threshold: "> 20%",
            },
            {
              name: "Heavy Metals",
              value: "Within limits",
              status: "pass",
              threshold: "< WHO limits",
            },
            {
              name: "Microbial Load",
              value: "< 10¬≤ CFU/ml",
              status: "pass",
              threshold: "< 10¬≥ CFU/ml",
            },
            {
              name: "Aflatoxins",
              value: "Not Detected",
              status: "pass",
              threshold: "< 5 ppb",
            },
            {
              name: "DNA Authentication",
              value: "Bacopa monnieri",
              status: "pass",
              threshold: "Species confirmed",
            },
            {
              name: "Solvent Residues",
              value: "None",
              status: "pass",
              threshold: "No harmful solvents",
            },
          ],
          payment: [
            { value: "‚Çπ320/kg", label: "Premium Price Paid" },
            { value: "‚Çπ40/kg", label: "Quality Bonus" },
            { value: "‚Çπ36,000", label: "Total Payment" },
            { value: "10 days", label: "Payment Processing" },
          ],
        },
      };

      let map;

      function verifyBatch() {
        const input = document
          .getElementById("batchInput")
          .value.trim()
          .toUpperCase();
        loadBatch(input);
      }

      function loadBatch(batchId) {
        const batch = batchDatabase[batchId];

        if (!batch) {
          alert(
            "Batch ID not found. Please try: ASHW_2026_001, TULSI_2026_042, or BRAHMI_2026_018",
          );
          return;
        }

        // Update header
        document.getElementById("productName").textContent = batch.productName;
        document.getElementById("batchId").textContent = batch.batchId;
        document.getElementById("mfgDate").textContent = batch.mfgDate;
        document.getElementById("location").textContent = batch.location;

        // Update timeline
        const timelineHtml = batch.timeline
          .map(
            (item) => `
                <div class="timeline-item">
                    <div class="timeline-icon">${item.icon}</div>
                    <div class="timeline-content">
                        <h4>${item.title}</h4>
                        <div class="timeline-date">üìÖ ${item.date}</div>
                        <div class="timeline-details">
                            ${Object.entries(item.details)
                              .map(
                                ([key, value]) => `
                                <div class="detail-row">
                                    <span class="detail-label">${key}:</span>
                                    <span>${value}</span>
                                </div>
                            `,
                              )
                              .join("")}
                        </div>
                    </div>
                </div>
            `,
          )
          .join("");
        document.getElementById("timelineContent").innerHTML = timelineHtml;

        // Update test results
        const testsHtml = batch.tests
          .map(
            (test) => `
                <div class="test-item ${test.status}">
                    <div>
                        <div class="test-name">${test.name}</div>
                        <div style="font-size: 0.85rem; color: var(--earth-600); margin-top: 0.25rem;">
                            Threshold: ${test.threshold}
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div class="test-value">${test.value}</div>
                        <span class="test-status ${test.status}">${test.status.toUpperCase()}</span>
                    </div>
                </div>
            `,
          )
          .join("");
        document.getElementById("testResults").innerHTML = testsHtml;

        // Update payment details
        const paymentHtml = batch.payment
          .map(
            (item) => `
                <div class="payment-item">
                    <div class="payment-value">${item.value}</div>
                    <div class="payment-label">${item.label}</div>
                </div>
            `,
          )
          .join("");
        document.getElementById("paymentDetails").innerHTML = paymentHtml;

        // Show details
        document.getElementById("batchDetails").style.display = "block";
        document
          .getElementById("batchDetails")
          .scrollIntoView({ behavior: "smooth", block: "start" });

        // Initialize map
        setTimeout(() => initMap(batch.coords, batch.location), 100);
      }

      function initMap(coords, locationName) {
        if (map) {
          map.remove();
        }

        map = L.map("map").setView(coords, 10);

        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution: "¬© OpenStreetMap contributors",
        }).addTo(map);

        const customIcon = L.divIcon({
          html: '<div style="background: #2ecc71; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; box-shadow: 0 4px 12px rgba(46,204,113,0.4);">üåø</div>',
          className: "custom-marker",
          iconSize: [30, 30],
        });

        L.marker(coords, { icon: customIcon })
          .addTo(map)
          .bindPopup(`<strong>${locationName}</strong><br>Harvest Origin`)
          .openPopup();

        setTimeout(() => map.invalidateSize(), 100);
      }

      // Auto-load first batch on page load for demo
      window.addEventListener("load", () => {
        // Optional: auto-load a sample batch
        // loadBatch('ASHW_2026_001');
      });
    </script>
  </body>
</html>
